<div class="wvu-calendar-widget <r:page:content name="so-background-color-class--calendar" /> background">
  <div class="wvu-calendar-widget__container">

    <r:page:if_has_content_for region="wvu-calendar-widget__header" always_show_in_edit_mode="true">
      <div class="wvu-calendar-widget__header">
        <r:editable_region name="wvu-calendar-widget__header">
          <h2>Calendar Widget Header</h2>
          <p>Subhead goes here.</p>
        </r:editable_region>
      </div>
    </r:page:if_has_content_for>

    <ul id="cal" class="wvu-calendar wvu-calendar--flex">

      <div id="<r:if expr="{{ NOT(BLANK(calendar_feed_page)) }}"><r:page:data name="calendar_feed_page" /></r:if><r:if expr="{{ BLANK(calendar_feed_page) }}"><r:site:data name="calendar_feed" /></r:if>"></div>

    </ul>

    <div class="wvu-calendar-widget__postscript">
      <r:editable_region name="wvu-calendar-widget__postscript" scope="site">
        Put any additional info or links here.
      </r:editable_region>
    </div>

  </div>
</div>

<r:edit_mode_only>
  <div class="wvu-instructions">
    <p><strong>Instructions for Calendar Widget:</strong> In order to use this, you must submit events to the <a href="cal.wvu.edu">WVU Calendar</a>. Then contact <a href="mailto:jay.allen@mail.wvu.edu">Jay Allen</a> and let him know you need a calendar feed for your website. When he gives you the code, enter it into your site settings > custom data in the <strong>calendar_feed</strong> field.</p>
    <p><strong>Background Color:</strong> <r:editable_region name="so-background-color-class--calendar" /></p>
  </div>
</r:edit_mode_only>

<r:content_for name="page_js">
  <script type="text/javascript" src="https://calendar.wvu.edu/Scripts/core.js"></script>
  <script type="text/javascript">
	    ActiveData.Events(
	        "https://calendar.wvu.edu/handlers/query.ashx?id=5d1eb30a58034b129320e36e1ec5f97c&tenant=&site=universityrelations",
	        function (response) {$("#cal").append(response.data);}
	    );
	</script>
</r:content_for>